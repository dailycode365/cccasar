"use strict";let t=Editor.require("unpack://engine-dev/cocos2d/animation/motion-path-helper").Bezier,o=cc.v2;function n(t,n,e){this.pos=t?t.clone():o(),this.inControl=n||this.pos.clone(),this.outControl=e||this.pos.clone(),this.keyframe=null}n.prototype.clone=function(){return new n(this.pos,this.inControl,this.outControl)},n.prototype.getValue=function(){return[this.pos.x,this.pos.y,this.inControl.x,this.inControl.y,this.outControl.x,this.outControl.y]},module.exports={Segment:n,getNearestParameter:function(o,n,e){let r=new t;r.start=o.pos,r.end=n.pos,r.startCtrlPoint=o.outControl,r.endCtrlPoint=n.inControl;let i=null,s=1/0,l=0;function u(t){if(t>=0&&t<=1){let o=r.getPoint(t),n=function(t,o){let n=t.x-o.x,e=t.y-o.y;return Math.sqrt(n*n+e*e)}(e,o);if(n<s)return s=n,l=t,i=o,!0}}for(let t=0;t<=100;t++)u(t/100);let p=.005;for(;p>4e-7;)u(l-p)||u(l+p)||(p/=2);return{t:l,dist:s,pos:i}},createSegmentWithNearset:function(t){let e=t.t,r=t.seg1.segment,i=t.seg2.segment,s=r.pos.x,l=r.pos.y,u=r.outControl.x,p=r.outControl.y,C=i.inControl.x,h=i.inControl.y,c=1-e,a=c*s+e*u,f=c*l+e*p,y=c*u+e*C,g=c*p+e*h,x=c*C+e*i.pos.x,m=c*h+e*i.pos.y,d=c*a+e*y,P=c*f+e*g,w=c*y+e*x,k=c*g+e*m,q=c*d+e*w,v=c*P+e*k;r.outControl=o(a,f),i.inControl=o(x,m);let N=new n;return N.pos=o(q,v),N.inControl=o(d,P),N.outControl=o(w,k),N}};