"use strict";var r=require("./studio/studio-importer"),e=require("./ccb/ccbproj-importer"),t=[];function i(r,e){var t="";if(e)for(var i=0,o=e.length;i<o;i++)t&&(t+=","),t+="*."+e[i];else t=Editor.T("MAIN_MENU.file.import_select_folder");return Editor.T("MAIN_MENU.file.import_project_fmt",{name:r,exts:t})}function o(r,e,o){if(!r instanceof String||0===r.length)return Editor.error('The "name" should be a non-empty string.'),void 0;if(!o)return Editor.error("The importer should not be null."),void 0;for(var n=!1,a=0,m=t.length;a<m;a++){if(t[a].name===r){n=!0;break}}if(n)return Editor.error("Project Importer %s already existed!",r),void 0;var p=null;e&&e.length>0&&(p=e instanceof Array?e:[e]),t.push({name:r,exts:p,importer:o});var c=i(r,p),l=Editor.i18n.formatPath("i18n:MAIN_MENU.file.title/i18n:MAIN_MENU.file.import_project");Editor.MainMenu.insert(l,7,[{label:c,click:function(){Editor.Ipc.sendToMain("project-importer:open",r,p)}}])}function n(r){for(var e=0,o=t.length;e<o;e++){var n=t[e];if(n.name===r){var a=i(r,n.exts),m=Editor.i18n.formatPath("i18n:MAIN_MENU.file.title/i18n:MAIN_MENU.file.import_project/"+a);Editor.MainMenu.remove(m),t.splice(e,1);break}}}module.exports={getMenuItemLabel:i,getImporterByName:function(r){for(var e=0,i=t.length;e<i;e++){var o=t[e];if(r===o.name)return o.importer}return null},registerImporter:o,unRegisterImporter:n,registerDefaultImporter:function(){o(r.name,r.exts,"packages://project-importer/core/studio/studio-importer"),o(e.name,e.exts,"packages://project-importer/core/ccb/ccbproj-importer")},unRegisterDefaultImporter:function(){n(r.name),n(e.name)}};