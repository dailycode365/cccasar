"use strict";const e=require("graceful-fs"),r=require("path"),i=require("./copy-file-sync"),s=require("../mkdirs");module.exports=function n(t,c,o){("function"==typeof o||o instanceof RegExp)&&(o={filter:o}),(o=o||{}).recursive=!!o.recursive,o.clobber=!("clobber"in o&&!o.clobber),o.overwrite="overwrite"in o?!!o.overwrite:o.clobber,o.dereference="dereference"in o&&!!o.dereference,o.preserveTimestamps="preserveTimestamps"in o&&!!o.preserveTimestamps,o.filter=o.filter||function(){return!0},o.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const f=o.recursive&&!o.dereference?e.lstatSync(t):e.statSync(t),a=r.dirname(c),p=e.existsSync(a);let l=!1;if(o.filter instanceof RegExp?(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),l=o.filter.test(t)):"function"==typeof o.filter&&(l=o.filter(t,c)),f.isFile()&&l)p||s.mkdirsSync(a),i(t,c,{overwrite:o.overwrite,errorOnExist:o.errorOnExist,preserveTimestamps:o.preserveTimestamps});else if(f.isDirectory()&&l)e.existsSync(c)||s.mkdirsSync(c),e.readdirSync(t).forEach(e=>{const i=o;i.recursive=!0,n(r.join(t,e),r.join(c,e),i)});else if(o.recursive&&f.isSymbolicLink()&&l){const r=e.readlinkSync(t);e.symlinkSync(r,c)}};