"use strict";const t=require("path"),e=require("graceful-fs");module.exports={symlinkPaths:function(s,r,n){if(t.isAbsolute(s))return e.lstat(s,(t,e)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:s,toDst:s}));{const o=t.dirname(r),i=t.join(o,s);return e.exists(i,r=>r?n(null,{toCwd:i,toDst:s}):e.lstat(s,(e,r)=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:s,toDst:t.relative(o,s)})))}},symlinkPathsSync:function(s,r){let n;if(t.isAbsolute(s)){if(!(n=e.existsSync(s)))throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}{const o=t.dirname(r),i=t.join(o,s);if(n=e.existsSync(i))return{toCwd:i,toDst:s};if(!(n=e.existsSync(s)))throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:t.relative(o,s)}}}};