function e(e,r,t){if(e.readUInt32)return e.readUInt32(r,t);var n;if(t){if(e.readUInt32BE)return e.readUInt32BE(r);n=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]}else{if(e.readUInt32LE)return e.readUInt32LE(r);n=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+(e[r+3]<<24)}return n}function r(e,r,t){if(e.readUInt16)return e.readUInt16(r,t);var n;if(t){if(e.readUInt16BE)return e.readUInt16BE(r);n=(e[r]<<8)+e[r+1]}else{if(e.readUInt16LE)return e.readUInt16LE(r);n=e[r]+(e[r+1]<<8)}return n}function t(e,r,t){t>7&&(r+=Math.floor(t/8),t%=8);var n=e[r];return t<7&&(n>>>=7-t),1&n}function n(e,r,n,a,i){var f=0,u=!1;i&&(t(e,r,n)>0&&(u=!0),a--,n++);for(var h=[],o=0;o<a;o++){var v=t(e,r,n+o);o>0&&(a-o)%8==0&&(h.push(f),f=0),f<<=1,f|=v}return h.push(f),(f=new Buffer(h)).negative=!!u,f}function a(e,r,t){for(var n=t.length,a=0;a<n;a++){var i=e[a+r],f=t[a],u=!1;if("number"==typeof f)u=f===i;else for(var h in f){f[h]===i&&(u=!0)}if(!u)return!1}return!0}module.exports=function(t,i){return a(t,0,[137,80,78,71,13,10,26,10])?function(r){var t=12;return!!a(r,t,[73,72,68,82])&&{type:"image",format:"PNG",mimeType:"image/png",width:e(r,t+=4,!0),height:e(r,t+4,!0)}}(t):a(t,0,[255,216,255])?function(e){for(var t=2,n=e.length,i=[255,[192,194]];t<n;){if(a(e,t,i))return{type:"image",format:"JPG",mimeType:"image/jpeg",width:r(e,(t+=5)+2,!0),height:r(e,t,!0)};t+=2,t+=r(e,t,!0)}}(t):a(t,0,[71,73,70,56,[55,57],97])?function(e){return{type:"image",format:"GIF",mimeType:"image/gif",width:r(e,6,!1),height:r(e,8,!1)}}(t):!!a(t,0,[[70,67],87,83])&&function(e){var t,a=8,i=0;if(67===e[0])try{e=require("zlib").inflate(e.slice(8,100)),a=0}catch(e){return{type:"flash",format:"SWF",mimeType:"application/x-shockwave-flash",width:null,height:null}}var f=n(e,a,i,5)[0];t=n(e,a,i+=5,f,!0);var u=(f>9?r(t,0,!0):t[0])*(t.negative?-1:1);t=n(e,a,i+=f,f,!0);var h=(f>9?r(t,0,!0):t[0])*(t.negative?-1:1);t=n(e,a,i+=f,f,!0);var o=(f>9?r(t,0,!0):t[0])*(t.negative?-1:1);t=n(e,a,i+=f,f,!0);var v=(f>9?r(t,0,!0):t[0])*(t.negative?-1:1);return{type:"flash",format:"SWF",mimeType:"application/x-shockwave-flash",width:Math.ceil((h-u)/20),height:Math.ceil((v-o)/20)}}(t)};