"use strict";const e=require("./custom-asset"),t=require("fire-fs"),r=require("fire-path");module.exports=class extends e{static defaultType(){return"animation-clip"}static version(){return"2.1.0"}deserialize(e){super.deserialize(e),this._oldVer=e.ver}import(e,i){t.readFile(e,"utf8",(s,a)=>{if(a){var o;try{o=JSON.parse(a)}catch(e){return i&&i(e),void 0}function l(e){if(!e||!e.rotation)return;let t=e.rotation,r=[];for(let e=0;e<t.length;e++)r.push({frame:t[e].frame,value:-t[e].value});delete e.rotation,e.angle=r}if("1.0.0"===this._oldVer){let r=o.curveData;l(r.props);for(let e in r.paths)l(r.paths[e].props);t.writeFileSync(e,JSON.stringify(o,null,2))}Editor.serialize.setName(o,r.basenameNoExt(e)),this._assetdb.saveAssetToLibrary(this.uuid,o)}i&&i(s)})}};