"use strict";var e=require("fire-fs"),s=require("fire-path"),t=require("./custom-asset");module.exports=class extends t{constructor(e){super(e),this.asyncLoadAssets=!1,this.autoReleaseAssets=!1}import(t,i){e.readJson(t,(e,r)=>{if(e)return i&&i(e),void 0;if(r){var a=Editor.serialize.findRootObject(r,"cc.SceneAsset");a?a.asyncLoadAssets=this.asyncLoadAssets:Editor.warn(`Can not find scene assset in the scene file "${t}", it maybe corrupted!`);var o=Editor.serialize.findRootObject(r,"cc.Scene");o?o.autoReleaseAssets=this.autoReleaseAssets:Editor.warn(`Can not find scene in the scene file "${t}", it maybe corrupted!`),Editor.serialize.setName(r,s.basenameNoExt(t)),this._assetdb.saveAssetToLibrary(this.uuid,r)}i&&i(e)})}static defaultType(){return"scene"}};