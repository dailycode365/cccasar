"use strict";var t={INFO_EXP:/info [^\n$(/>)]*/gi,COMMON_EXP:/common [^\n$(/>)]*/gi,PAGE_EXP:/page [^\n$(/>)]*/gi,CHAR_EXP:/char [^\n$(/>)]*/gi,KERNING_EXP:/kerning [^\n$(/>)]*/gi,ITEM_EXP:/\w+=[^ \r\n]+/gi,INT_EXP:/^[\-]?\d+$/,_parseStrToObj:function(t){var e=t.match(this.ITEM_EXP),r={};if(e)for(var a=0,i=e.length;a<i;a++){var n=e[a],s=n.indexOf("="),o=n.substring(0,s),h=n.substring(s+1);'"'===h[0]?(h=h.substring(1,h.length-1)).match(this.INT_EXP)&&(h=parseInt(h)):h.match(this.INT_EXP)&&(h=parseInt(h)),r[o]=h}return r},parseFnt:function(t){var e={},r=t.match(this.INFO_EXP);if(!r)return e;var a=this._parseStrToObj(r[0]),i=this._parseStrToObj(t.match(this.COMMON_EXP)[0]);if(e.commonHeight=i.lineHeight,e.fontSize=parseInt(a.size),cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var n=cc.configuration.getMaxTextureSize();(i.scaleW>n.width||i.scaleH>n.height)&&Editor.log("cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported")}1!==i.pages&&Editor.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page");var s=this._parseStrToObj(t.match(this.PAGE_EXP)[0]);0!==s.id&&Editor.log("cc.LabelBMFont._parseImageFileName() : file could not be found"),e.atlasName=s.file;for(var o=t.match(this.CHAR_EXP),h=e.fontDefDictionary={},c=0,g=o.length;c<g;c++){var E=this._parseStrToObj(o[c]);h[E.id]={rect:{x:E.x,y:E.y,width:E.width,height:E.height},xOffset:E.xoffset,yOffset:E.yoffset,xAdvance:E.xadvance}}var f=e.kerningDict={},_=t.match(this.KERNING_EXP);if(_)for(c=0,g=_.length;c<g;c++){var m=this._parseStrToObj(_[c]);f[m.first<<16|65535&m.second]=m.amount}return e}};module.exports=t;